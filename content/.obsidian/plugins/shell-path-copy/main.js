/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=(r,t)=>{for(var e in t)p(r,e,{get:t[e],enumerable:!0})},b=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of g(t))!f.call(r,a)&&a!==e&&p(r,a,{get:()=>t[a],enumerable:!(i=u(t,a))||i.enumerable});return r};var y=r=>b(p({},"__esModule",{value:!0}),r);var v={};m(v,{default:()=>d});module.exports=y(v);var s=require("obsidian"),k={pathWrapping:"backticks",showNotifications:!0,menuDisplay:"both",showAbsolutePath:!0,showFileUrl:!0,showObsidianUrl:!0,showMarkdownLink:!0,markdownLinkFormat:"wiki-style"},d=class extends s.Plugin{async onload(){await this.loadSettings(),this.registerEvent(this.app.workspace.on("file-menu",(t,e)=>{this.addPathCopyMenuItems(t,e)})),this.registerCommands(),this.addSettingTab(new w(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},k,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommands(){let t=this.settings.menuDisplay==="both",e=this.settings.menuDisplay==="windows",i=this.settings.menuDisplay==="linux-mac";if((t||i)&&this.addCommand({id:"copy-unix-path",name:"Copy as Linux/Mac path",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyPath(a,"unix")}}),(t||e)&&this.addCommand({id:"copy-windows-path",name:"Copy as Windows path",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyPath(a,"windows")}}),!s.Platform.isMobile&&this.settings.showAbsolutePath){let l=process.platform==="win32"?"Windows":"Linux/Mac";this.addCommand({id:"copy-absolute-path",name:`Copy as absolute ${l} path`,callback:()=>{let o=this.getActiveOrFocusedFile();o&&this.copyAbsolutePath(o)}})}!s.Platform.isMobile&&this.settings.showFileUrl&&this.addCommand({id:"copy-file-url",name:"Copy as file:// URL",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyFileUrl(a)}}),this.settings.showObsidianUrl&&this.addCommand({id:"copy-obsidian-url",name:"Copy as Obsidian URL",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyObsidianUrl(a)}}),this.settings.showMarkdownLink&&this.addCommand({id:"copy-markdown-link",name:"Copy as markdown link",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyMarkdownLink(a)}})}createPathMenuItem(t,e,i){let a=i==="unix",l=a?"Copy Relative Linux/Mac Path":"Copy Relative Windows Path",o=a?"terminal":"folder-closed";t.addItem(n=>{n.setTitle(l).setIcon(o).setSection("shell-path-copy").onClick(async()=>{await this.copyPath(e,i)})})}addPathCopyMenuItems(t,e){let i=this.settings.menuDisplay==="both",a=this.settings.menuDisplay==="windows",l=this.settings.menuDisplay==="linux-mac";if(t.addSeparator(),(i||l)&&this.createPathMenuItem(t,e,"unix"),(i||a)&&this.createPathMenuItem(t,e,"windows"),!s.Platform.isMobile&&this.settings.showAbsolutePath){let o=process.platform==="win32",n=o?"Windows":"Linux/Mac",c=o?"folder-closed":"terminal";t.addItem(h=>{h.setTitle(`Copy Absolute ${n} Path`).setIcon(c).setSection("shell-path-copy").onClick(async()=>{await this.copyAbsolutePath(e)})})}!s.Platform.isMobile&&this.settings.showFileUrl&&t.addItem(o=>{o.setTitle("Copy as file:// URL").setIcon("globe").setSection("shell-path-copy").onClick(async()=>{await this.copyFileUrl(e)})}),this.settings.showObsidianUrl&&t.addItem(o=>{o.setTitle("Copy as Obsidian URL").setIcon("link-2").setSection("shell-path-copy").onClick(async()=>{await this.copyObsidianUrl(e)})}),this.settings.showMarkdownLink&&t.addItem(o=>{o.setTitle("Copy as Markdown Link").setIcon("link").setSection("shell-path-copy").onClick(async()=>{await this.copyMarkdownLink(e)})})}async copyPath(t,e){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let i=t.path;e==="windows"?(i=i.replace(/\//g,"\\"),i&&!i.startsWith("\\")&&(i="\\"+i)):i&&!i.startsWith("/")&&(i="/"+i),t.path||(i=e==="windows"?"\\":"/");let a=this.wrapPath(i);if(await navigator.clipboard.writeText(a),this.settings.showNotifications){let l=e==="unix"?"Linux/Mac":"Windows";new s.Notice(`${l} path copied!`)}}catch(i){i instanceof Error&&i.message.includes("Clipboard API")?new s.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy path:",i),new s.Notice("Failed to copy path. See console for details."))}}async copyAbsolutePath(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");if(s.Platform.isMobile){new s.Notice("Absolute paths are not available on mobile devices.");return}let e=this.app.vault.adapter;if(!e||!this.hasGetFullRealPath(e))throw new Error("getFullRealPath method not available on this platform.");let i=e.getFullRealPath(t.path),a=this.wrapPath(i);await navigator.clipboard.writeText(a),this.settings.showNotifications&&new s.Notice("Absolute path copied!")}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new s.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy absolute path:",e),new s.Notice("Failed to copy absolute path. See console for details."))}}async copyFileUrl(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");if(s.Platform.isMobile){new s.Notice("File URLs are not available on mobile devices.");return}let e=this.app.vault.adapter;if(!e||!this.hasGetFullRealPath(e))throw new Error("getFullRealPath method not available on this platform.");let i=e.getFullRealPath(t.path),a;/^[a-zA-Z]:/.test(i)?a=`file:///${i.replace(/\\/g,"/")}`:a=`file://${i}`,a=a.split("/").map((n,c)=>c<3||n===""?n:encodeURIComponent(n)).join("/"),await navigator.clipboard.writeText(a),this.settings.showNotifications&&new s.Notice("File URL copied!")}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new s.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy file URL:",e),new s.Notice("Failed to copy file URL. See console for details."))}}async copyMarkdownLink(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let e=t.name,i=e.includes(".")?e.substring(0,e.lastIndexOf(".")):e,a;if(this.settings.markdownLinkFormat==="wiki-style")a=`[[${i}]]`;else{let l=t.path;l&&!l.startsWith("/")&&(l="/"+l),t.path||(l="/"),a=`[${e}](${l})`}if(await navigator.clipboard.writeText(a),this.settings.showNotifications){let l=this.settings.markdownLinkFormat==="wiki-style"?"Wiki-style link":"Markdown link";new s.Notice(`${l} copied!`)}}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new s.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy markdown link:",e),new s.Notice("Failed to copy markdown link. See console for details."))}}async copyObsidianUrl(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let e=this.app.vault.getName(),i=t.path;i.endsWith(".md")&&(i=i.slice(0,-3));let a=encodeURIComponent(e),l=encodeURIComponent(i),o=`obsidian://open?vault=${a}&file=${l}`;await navigator.clipboard.writeText(o),this.settings.showNotifications&&new s.Notice("Obsidian URL copied!")}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new s.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy Obsidian URL:",e),new s.Notice("Failed to copy Obsidian URL. See console for details."))}}hasGetFullRealPath(t){return typeof t=="object"&&t!==null&&"getFullRealPath"in t&&typeof t.getFullRealPath=="function"}wrapPath(t){switch(this.settings.pathWrapping){case"double-quotes":return`"${t}"`;case"single-quotes":return`'${t}'`;case"backticks":return`\`${t}\``;case"none":default:return t}}getActiveFile(){return this.app.workspace.getActiveFile()}getFocusedFileInExplorer(){let t=this.app.workspace.getLeavesOfType("file-explorer")[0];if(!t)return null;let e=t.view.containerEl.querySelector(".nav-file.is-focused, .nav-folder.is-focused");if(!e)return null;let i=e.getAttribute("data-path");return i?this.app.vault.getAbstractFileByPath(i):null}getActiveOrFocusedFile(){let t=this.getActiveFile();return t||(t=this.getFocusedFileInExplorer()),t||new s.Notice("No file selected"),t}},w=class extends s.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("div",{text:"Path format examples:",cls:"setting-item-heading"});let e=t.createEl("div",{cls:"setting-item-description"});e.createEl("div",{text:"\u2022 Relative Linux/Mac: /folder/subfolder/file.md"}),e.createEl("div",{text:"\u2022 Relative Windows: \\folder\\subfolder\\file.md"}),e.createEl("div",{text:"\u2022 Absolute Windows: C:\\Users\\name\\vault\\folder\\file.md"}),e.createEl("div",{text:"\u2022 Absolute Linux/Mac: /home/user/vault/folder/file.md"}),e.createEl("div",{text:"\u2022 File URL: file:///C:/Users/name/vault/folder/file.md (Windows) or file:///home/user/vault/folder/file.md (Linux/Mac)"}),e.createEl("div",{text:"\u2022 Obsidian URL: obsidian://open?vault=MyVault&file=folder/file"}),e.createEl("div",{text:"\u2022 Markdown Link: [[filename]] (wiki-style) or [filename.md](/path/filename.md) (standard)"}),t.createEl("br"),new s.Setting(t).setName("Path wrapping").setDesc("Choose how paths are wrapped when copied to clipboard (useful for paths with spaces)").addDropdown(o=>o.addOption("none","None - /path with spaces/file.md").addOption("double-quotes",'Double quotes - "/path with spaces/file.md"').addOption("single-quotes","Single quotes - '/path with spaces/file.md'").addOption("backticks","Backticks - `/path with spaces/file.md`").setValue(this.plugin.settings.pathWrapping).onChange(async n=>{this.plugin.settings.pathWrapping=n,await this.plugin.saveSettings()})),new s.Setting(t).setName("Menu display").setDesc("Control which path formats appear in the context menu").addDropdown(o=>o.addOption("both","Show both Windows and Linux/Mac options").addOption("windows","Show Windows options only").addOption("linux-mac","Show Linux/Mac options only").setValue(this.plugin.settings.menuDisplay).onChange(async n=>{this.plugin.settings.menuDisplay=n,await this.plugin.saveSettings(),new s.Notice("Please reload Obsidian for command palette changes to take effect")})),s.Platform.isMobile||(new s.Setting(t).setName("Show absolute path options").setDesc("Display absolute path copy options in menus (Desktop only). Absolute paths will use the path wrapping setting above.").addToggle(o=>o.setValue(this.plugin.settings.showAbsolutePath).onChange(async n=>{this.plugin.settings.showAbsolutePath=n,await this.plugin.saveSettings(),new s.Notice("Please reload Obsidian for command palette changes to take effect")})),new s.Setting(t).setName("Show file:// URL option").setDesc("Display the file:// URL copy option in menus (Desktop only)").addToggle(o=>o.setValue(this.plugin.settings.showFileUrl).onChange(async n=>{this.plugin.settings.showFileUrl=n,await this.plugin.saveSettings(),new s.Notice("Please reload Obsidian for command palette changes to take effect")}))),new s.Setting(t).setName("Show Obsidian URL option").setDesc("Display the Obsidian URL copy option in menus").addToggle(o=>o.setValue(this.plugin.settings.showObsidianUrl).onChange(async n=>{this.plugin.settings.showObsidianUrl=n,await this.plugin.saveSettings(),new s.Notice("Please reload Obsidian for command palette changes to take effect")})),new s.Setting(t).setName("Show markdown link option").setDesc("Display the markdown link copy option in menus").addToggle(o=>o.setValue(this.plugin.settings.showMarkdownLink).onChange(async n=>{this.plugin.settings.showMarkdownLink=n,await this.plugin.saveSettings(),new s.Notice("Please reload Obsidian for command palette changes to take effect")})),this.plugin.settings.showMarkdownLink&&new s.Setting(t).setName("Markdown link format").setDesc("Choose the format for markdown links").addDropdown(o=>o.addOption("wiki-style","Wiki-style - [[filename]]").addOption("standard-markdown","Standard markdown - [filename](path)").setValue(this.plugin.settings.markdownLinkFormat).onChange(async n=>{this.plugin.settings.markdownLinkFormat=n,await this.plugin.saveSettings()})),new s.Setting(t).setName("Show notifications").setDesc("Display a notification when a path is copied").addToggle(o=>o.setValue(this.plugin.settings.showNotifications).onChange(async n=>{this.plugin.settings.showNotifications=n,await this.plugin.saveSettings()})),t.createEl("br"),t.createEl("br");let i=t.createEl("div",{cls:"setting-item-description",attr:{style:"text-align: center; opacity: 0.8;"}}),a=this.plugin.manifest.version||"1.0.0";i.createEl("span",{text:`Version ${a} | `});let l=(o,n)=>{let c=i.createEl("a",{text:o,href:n});return c.onclick=h=>{h.preventDefault(),window.open(n)},c};l("GitHub","https://github.com/ckelsoe/obsidian-shell-path-copy"),i.createEl("span",{text:" | "}),l("Report Issues","https://github.com/ckelsoe/obsidian-shell-path-copy/issues")}};

/* nosourcemap */